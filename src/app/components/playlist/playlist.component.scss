.playlist-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  max-height: 100%;
  background-color: var(--ion-background-color); /* dark background */
}

ion-list-header {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  flex: 0 0 auto;
  font-size: 16px;
  font-weight: bold;
  padding: 12px;
  background-color: var(--ion-card-background); /* was #f4f4f4 */
  border-bottom: 1px solid var(--ion-border-color); /* was #ccc */
  color: var(--ion-text-color);
}

.list-header {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  padding: 0 20px;
  color: var(--ion-text-color);
}

#playlist {
  flex: 1 1 auto;
  padding: 8px;
  background-color: var(--ion-background-color);
}

/* Direct child of #playlist is app-playlist-track, which contains ion-item.track */
#playlist > app-playlist-track {
  display: block; /* Ensure app-playlist-track behaves as a block for margin */
  margin-bottom: 8px; /* Apply margin between tracks here */
}

#playlist > div { /* This might be targeting the inner div where cdkDropList is applied if not app-playlist-track */
  display: flex;
  flex-direction: column;
  gap: 8px; /* This gap might be redundant if margin-bottom is set on tracks */
}


.controls {
  display: flex;
  gap: 15px;
}

button {
  background-color: transparent;
  border: none;
  color: var(--ion-color-primary); /* was #007aff */
  font-size: 16px;
  cursor: pointer;
  transition: color 0.2s ease;
}

button:hover,
button:focus {
  color: var(--ion-color-primary-shade);
  outline: none;
}

button i {
  margin-right: 5px;
}

#playlist::part(scroll) {
  scrollbar-width: none; /* Firefox */
}

#playlist::part(scroll)::-webkit-scrollbar {
  display: none; /* Chrome, Safari */
}

/* Styles for the individual playlist tracks (ion-item.track)
   These were moved from playlist-track.component.scss */
app-playlist-track > ion-item.track {
  /* Remove Ionic's default borders */
  --border-width: 0;
  --inner-border-width: 0;
  --border-color: transparent;

  /* Base colors using theme variables */
  --background: transparent;
  --color: var(--ion-text-color);

  border-radius: 8px;
  overflow: hidden;
  transition: background-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
  cursor: pointer;

  ion-thumbnail {
    --border-radius: 4px;
    margin-inline-end: 16px;
  }

  ion-label {
    h2 {
      font-weight: 500;
      font-size: 1.1em;
      color: inherit;
    }

    p {
      font-size: 0.9em;
      color: inherit;
      opacity: 0.7;
    }
  }
}

#playlist:not(.cdk-drop-list-dragging) .track {
  &.track-hover:hover {
    --background: var(--ion-color-primary-tint);
    --color: var(--ion-color-primary-contrast);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    transform: translateX(-2px);
  }

  &.track-selected {
    --background: var(--ion-color-primary);
    --color: var(--ion-color-primary-contrast);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    transform: translateX(-2px);
  }
}

.cdk-drag-preview,
.cdk-drag-placeholder,
.cdk-drag {
  user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
}

/* Styles for the drag preview element (the floating clone) */
app-playlist-track.cdk-drag.cdk-drag-preview {
  /* Exactly match the .track-selected state from playlist-track.component.scss */
  --background: var(--ion-color-primary) !important;
  --color: var(--ion-color-primary-contrast) !important;
  background: var(--ion-color-primary) !important;
  color: var(--ion-color-primary-contrast) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  transform: translateX(-2px); /* Matching track-selected shadow */
  border-radius: 8px;
  cursor: grabbing; /* Indicate active dragging */
  z-index: 1000; /* Ensure the dragged item is on top */
  overflow: hidden; /* Prevents scrollbars on the preview */
}

/* Placeholder during drag (the original item's spot) */
app-playlist-track.cdk-drag.cdk-drag-placeholder {
  /* Ionic component variables */
  --background: var(--ion-placeholder-color) !important;
  --color: var(--ion-background-color) !important;

  /* Element styles */
  background: var(--ion-placeholder-color) !important;
  color: var(--ion-background-color) !important;

  /* Visual styling */
  border-radius: 8px;
  border: 1px solid var(--ion-border-color);
  box-shadow: none;
  transition: all 0.3s ease;

  /* Internal ion-item styling */
  ion-item {
    --background: transparent !important;
    --color: var(--ion-background-color) !important;
    height: 100%;
  }

  /* Label text styling */
  ion-label {
    h2, p {
      color: var(--ion-background-color) !important;
    }
  }
}

/* Animate item movement when drop list is being dragged */
.cdk-drop-list-dragging app-playlist-track:not(.cdk-drag-placeholder) {
  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
}

